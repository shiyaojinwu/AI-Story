# 整体需求
## 定位
一个极简的“故事到视频”生成练手项目，强调功能跑通与架构可扩展。用户新建故事后，系统自动生成分镜描述，并在 Storyboard 中以视觉卡片展示每个镜头，可单独进入详情页进行生成、选择转场效果与配音。
主要功能
- 从故事输入到视频生成的完整链路；
- Storyboard 可视化分镜管理；
- 每个镜头支持单独编辑与生成；
- 支持视频转场与配音功能（视频转场功能可选，根据时间精力可额外扩展）；
- 一键批量生成视频。
交互描述
页面
详细交互流程
Create（新建故事页）
- 用户输入故事文本和选择风格（电影 / 动画 / 写实）
- 点击【生成故事】后触发后端接口 
- 系统显示加载状态，等待 LLM 返回分镜 JSON
- 生成成功后自动导航至Storyboard，若生成失败，弹出错误提示并可重试
Storyboard（分镜页）
- 进入页面后加载当前项目的分镜卡片（横向滚动展示）-
- 用户可左右滑动浏览卡片，每张卡片显示缩略图、标题、状态、详情按钮
-  点击【详情】进入分镜详情页] 
- 点击底部【生成视频】按钮，触发 启动视频合成任务
- 合成完成后，状态更新为“完成”，跳转至预览页
Shot Detail（分镜详情页）
- 页面顶部显示返回导航和镜头状态标签
- 用户可查看或编辑 Prompt 文本框- 选择视频过渡效果（Ken Burns / Crossfade / Volume Mix）
-  填写 Narration 文本内容- 点击【Generate Image】调用重新图像生成
- 系统实时更新生成状态（未生成 → 生成中 → 已生成）
- 完成后用户可返回 Storyboard 查看更新结果
Assets（资产库）
- 页面顶部为搜索框，可按故事名称或生成时间筛选
- 列表以卡片网格形式展示故事（含缩略图、标题、时间）- 点击任意卡片后直接跳转进入预览页（极简模式）
Preview（成品预览页）
- 用户可播放、暂停、拖动时间轴、调整音量
- 可点击【Export Video】导出成品文件
# 后端任务
设计并实现所有接口（故事提交、分镜查询、模型调用、产物存储）、数据库设计与维护、任务调度， ECS 部署，Nginx 配置、FRP 内网穿透搭建
所有接口开发完成，客户端声明式调用正常，通信稳定
服务端稳定运行，支持多用户并发，日志完整，部署无异常

# DEVLOG.md 11.24 21.16
服务端框架搭建完成，2 个核心接口雏形可用，数据库初始化完毕
## Change Log


## Progress Summary
完成了接口与数据格式设计 数据库表设计
gin postgresql 初始化

## What's done
main.go
config.go
db.go
router.go
model/story.go

## In Progress
完成model层中

## Not Done yet
to write

## Problem

## Design Decisions

### 数据库实例传递方法
方案a：包级全局单例
- db包直接声明全局变量

方案b:依赖注入
- controlle定义为结构体，数据库实例通过字段注入

决策：a 
- 因为是小项目，没必要写那么多样板代码，之后重构可以用b
